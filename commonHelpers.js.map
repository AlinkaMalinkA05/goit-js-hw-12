{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixaby-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst keyApi = '43059548-3adc942b003e7790296d060a7';\n\nexport async function getPicture(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: keyApi,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching pictures from Pixabay API');\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector(\".gallery\")\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nexport function renderGallery(images) {\n  const newMarkup = images.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `<li>\n            <div class=\"lightbox-container\">\n          <a class=\"gallery-link\"\n          href=\"${largeImageURL}\">\n          <img class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n              height=\"152\"/>\n      </a>\n      </div>\n      <div class='info-block'>\n          <div class=\"info\">\n              <h3 class = \"head-likes\">Likes</h3>\n              <p>${likes}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-views\">Views</h3>\n              <p>${views}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-comments\">Comments</h3>\n              <p>${comments}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-downloads\">Downloads</h3>\n              <p>${downloads}</p>\n          </div>\n      </div>\n  </li>`\n  )\n  .join('');\n\n  gallery.insertAdjacentHTML('beforeend', newMarkup);\n  lightbox.refresh();\n}\n\nexport function renderLoader(loaderElement) {\n  loaderElement.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loaderElement) {\n  loaderElement.classList.add('is-hidden');\n}\n\nexport function renderErrorMessage(message) {\n  iziToast.error({\n    message: message,\n    title: 'Error',\n    position: 'topRight',\n  });\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPicture } from './js/pixaby-api';\nimport { renderGallery, renderErrorMessage, renderLoader, hideLoader } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet query\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n  const findValue = form.elements.searchQuery.value.trim();\n  currentQuery = findValue;\n  if (findValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: \"Field can't be empty\",\n      position: 'topRight',\n    });\n    return;\n  }\n  handleSearch(findValue, currentPage);\n}\n\nasync function handleSearch(query, currentPage) {\n  try {\n      renderLoader(loader);\n      const data = await getPicture(query, currentPage);\n      hideLoader(loader);\n      console.log(data.hits);\n      renderGallery(data.hits)\n\n      if (data.hits.length === 0) {\n          renderErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n          return;\n      }\n      renderGallery(data.hits);\n    if (data.totalHits <= page * 15) {\n      hideLoader();\n          loadMoreBtn.style.display = 'none';\n      } else {\n        loadMoreBtn.style.display = 'block';\n      }\n  } catch (error) {\n      renderErrorMessage('Something went wrong');\n      hideLoader(loader);\n  }\n}\n\nloadMoreBtn.addEventListener(\"click\", onLoadMoreClick)\nasync function onLoadMoreClick() {\n  page++\n  const data = await getPicture(currentQuery, page);\n  renderGallery(data.hits)\n  \n}"],"names":["baseUrl","keyApi","getPicture","query","page","perPage","axios","gallery","lightbox","SimpleLightbox","renderGallery","images","newMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderLoader","loaderElement","hideLoader","renderErrorMessage","message","iziToast","form","loader","loadMoreBtn","currentPage","currentQuery","handleSubmit","event","findValue","handleSearch","data","onLoadMoreClick"],"mappings":"owBAEA,MAAMA,EAAU,2BACVC,EAAS,qCAER,eAAeC,EAAWC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC9D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIN,EAAS,CACxC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACP,CACP,CAAK,GACe,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,0CAA0C,CAC3D,CACH,CChBA,MAAMG,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,gBAAiB,QACnB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAYD,EAAO,IAAI,CAAC,CAC5B,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAQ;AAAA;AAAA;AAAA,kBAGUL,CAAa;AAAA;AAAA,qBAEVD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAQNC,CAAK;AAAA;AAAA;AAAA;AAAA,mBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,mBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,mBAIRC,CAAS;AAAA;AAAA;AAAA,QAIzB,EACA,KAAK,EAAE,EAERZ,EAAQ,mBAAmB,YAAaK,CAAS,EACjDJ,EAAS,QAAO,CAClB,CAEO,SAASY,EAAaC,EAAe,CAC1CA,EAAc,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASC,EAAWD,EAAe,CACxCA,EAAc,UAAU,IAAI,WAAW,CACzC,CAEO,SAASE,EAAmBC,EAAS,CAC1CC,EAAS,MAAM,CACb,QAASD,EACT,MAAO,QACP,SAAU,UACd,CAAG,CACH,CClEA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCnB,EAAU,SAAS,cAAc,UAAU,EAC3CoB,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAG3D,IAAIC,EAAc,EACdC,EAAe,GAGnBJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBzB,EAAQ,UAAY,GACpBsB,EAAc,EACd,MAAMI,EAAYP,EAAK,SAAS,YAAY,MAAM,OAElD,GADAI,EAAeG,EACXA,IAAc,GAAI,CACpBR,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uBACT,SAAU,UAChB,CAAK,EACD,MACD,CACDS,EAAaD,EAAWJ,CAAW,CACrC,CAEA,eAAeK,EAAa/B,EAAO0B,EAAa,CAC9C,GAAI,CACAT,EAAaO,CAAM,EACnB,MAAMQ,EAAO,MAAMjC,EAAWC,EAAO0B,CAAW,EAKhD,GAJAP,EAAWK,CAAM,EACjB,QAAQ,IAAIQ,EAAK,IAAI,EACrBzB,EAAcyB,EAAK,IAAI,EAEnBA,EAAK,KAAK,SAAW,EAAG,CACxBZ,EAAmB,0EAA0E,EAC7F,MACH,CACDb,EAAcyB,EAAK,IAAI,EACrBA,EAAK,WAAa,KAAO,IAC3Bb,IACIM,EAAY,MAAM,QAAU,QAE9BA,EAAY,MAAM,QAAU,OAEjC,MAAe,CACZL,EAAmB,sBAAsB,EACzCD,EAAWK,CAAM,CACpB,CACH,CAEAC,EAAY,iBAAiB,QAASQ,CAAe,EACrD,eAAeA,GAAkB,CAC/B,OACA,MAAMD,EAAO,MAAMjC,EAAW4B,EAAc,IAAI,EAChDpB,EAAcyB,EAAK,IAAI,CAEzB"}