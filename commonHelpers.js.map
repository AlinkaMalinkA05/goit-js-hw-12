{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixaby-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst keyApi = '43059548-3adc942b003e7790296d060a7';\n\nexport async function getPicture(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: keyApi,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching pictures from Pixabay API');\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector(\".gallery\")\nlet lightbox; \n\nexport function renderGallery(images) {\n  const newMarkup = images.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `<li>\n            <div class=\"lightbox-container\">\n          <a class=\"gallery-link\"\n          href=\"${largeImageURL}\">\n          <img class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n              height=\"152\"/>\n      </a>\n      </div>\n      <div class='info-block'>\n          <div class=\"info\">\n              <h3 class = \"head-likes\">Likes</h3>\n              <p>${likes}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-views\">Views</h3>\n              <p>${views}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-comments\">Comments</h3>\n              <p>${comments}</p>\n          </div>\n          <div class=\"info\">\n              <h3 class = \"head-downloads\">Downloads</h3>\n              <p>${downloads}</p>\n          </div>\n      </div>\n  </li>`\n  )\n  .join('');\n  gallery.insertAdjacentHTML('beforeend', newMarkup);\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n  }\n}\nexport function renderLoader(loaderElement) {\n  loaderElement.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loaderElement) {\n  loaderElement.classList.add('is-hidden');\n}\n\nexport function renderErrorMessage(message) {\n  iziToast.error({\n    message: message,\n    title: 'Error',\n    position: 'topRight',\n  });\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPicture } from './js/pixaby-api';\nimport { renderGallery, renderErrorMessage, renderLoader, hideLoader } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick); \n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n  const findValue = form.elements.searchQuery.value.trim();\n  currentQuery = findValue;\n  if (findValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: \"Field can't be empty\",\n      position: 'topRight',\n    });\n    return;\n  }\n  handleSearch(findValue, currentPage, perPage);\n}\n\nasync function onLoadMoreClick() {  \n  currentPage++;\n  try {\n    renderLoader(loader);\n    const data = await getPicture(currentQuery, currentPage, perPage);\n    hideLoader(loader);\n    \n    console.log(data.hits);\n    renderGallery(data.hits);\n\n    if (currentPage * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      \n      if (data.hits.length === 0) {\n        renderErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      } else {\n        renderErrorMessage('Sorry, there are no more images to load.');\n      }\n    }\n\n  } catch (error) {\n    renderErrorMessage(error.message);\n    hideLoader(loader);\n  }\n}\n\nasync function handleSearch(query, page, perPage) {\n  try {\n    renderLoader(loader);\n    const data = await getPicture(query, page, perPage);\n    hideLoader(loader);\n\n    console.log(data.hits);\n    renderGallery(data.hits);\n\n    if (data.hits.length === 0) {\n      renderErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      renderErrorMessage('Sorry, there are no images matching your search query. Please try again!')\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    renderErrorMessage(error.message);\n    hideLoader(loader);\n  }\n}"],"names":["baseUrl","keyApi","getPicture","query","page","perPage","axios","gallery","renderGallery","images","newMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","renderLoader","loaderElement","hideLoader","renderErrorMessage","message","iziToast","form","loader","loadMoreBtn","currentPage","currentQuery","handleSubmit","onLoadMoreClick","event","findValue","handleSearch","data","error"],"mappings":"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"}